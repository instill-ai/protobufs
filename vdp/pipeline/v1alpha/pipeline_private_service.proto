syntax = "proto3";

package vdp.pipeline.v1alpha;

// Google API
import "google/api/annotations.proto";
import "google/api/client.proto";

import "vdp/pipeline/v1alpha/pipeline.proto";

// Pipeline service responds to internal access
service PipelinePrivateService {
  // List all pipelines deployed on VDP (admin only).
  //
  // `ListPipelinesAdmin` is a call with the method(s) `GET` within the `PipelinePrivateSerive` service This is a *private* method that is only avaible for admins to list *all* pipelines from *all* users. Only admins with root permission can call this methods. It takes in `ListPipelinesAdminRequest` and returns a `ListPipelinesAdminResponse`.
  rpc ListPipelinesAdmin(ListPipelinesAdminRequest)
      returns (ListPipelinesAdminResponse) {
    option (google.api.http) = {
      get : "/v1alpha/admin/pipelines"
    };
  }

  // Get the detail of a pipeline with it's name (admin only).
  //
  // `GetPipeLineAdmin` is a call with the method(s) `GET` within the `PipelinePrivateService` service. This is a *private* method that is only avaible for admins to get a pipeline given a pipeline name embedded in the *GetPipelineAdminRequest*. It takes in `GetPipelineAdminRequest` and returns a `GetPipelineAdminResponse`.
  //
  // NOTE: pipeline name must have the format of "pipelines/*".
  rpc GetPipelineAdmin(GetPipelineAdminRequest)
      returns (GetPipelineAdminResponse) {
    option (google.api.http) = {
      get : "/v1alpha/admin/{name=pipelines/*}"
    };
    option (google.api.method_signature) = "name";
  }

  // Get the detail of a pipeline with it's permalink (admin only).
  //
  // `LookUpPipelineAdmin` is a call with the method(s) `GET` within the `PipelinePrivateService` service This is a *private* method that is only avaible for admins to get a pipeline given a permalink. It takes in `LookUpPipelineAdminRequest` and returns a `LookUpPipelineAdminResponse`.
  //
  // NOTE: permalink must have to format of "pipelines/{uid}".
  rpc LookUpPipelineAdmin(LookUpPipelineAdminRequest)
      returns (LookUpPipelineAdminResponse) {
    option (google.api.http) = {
      get : "/v1alpha/admin/{permalink=pipelines/*}/lookUp"
    };
    option (google.api.method_signature) = "permalink";
  }
}
